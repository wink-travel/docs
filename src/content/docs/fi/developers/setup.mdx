---
title: Asennus
description: Tässä artikkelissa näytetään, miten pääset nopeasti alkuun kehittäjänä ja aloitat API-rajapintojemme testaamisen Winkissä.
sidebar:
  order: 1
---

import { Steps } from '@astrojs/starlight/components';
import CloudinaryImage from '/src/components/cloudinary-image.astro';

Tässä artikkelissa näytetään, miten pääset nopeasti alkuun kehittäjänä ja aloitat API-rajapintojemme testaamisen Winkissä.

:::note
Testaus tulisi aina suorittaa [testausympäristössämme](/fi/getting-started/environments). Siellä on paljon vähemmän dataa, mutta voit testata niin paljon kuin haluat ilman, että kuormitat tuotantoympäristöä.

Kun olet valmis siirtymään tuotantoon, sertifioimme tilisi ja sovelluksesi, ja voit julkaista tuotantoympäristössämme.
:::

Noudata näitä ohjeita:

<Steps>
1. [Rekisteröidy](/fi/user/register) käyttäjätilillesi Winkissä
2. Luo [matkatoimiston tili](/fi/travel-agent/what-is-agent) tai [kumppanitili](/fi/studio/what-is-studio).
3. [Luo sovellus](/fi/developer/applications), jossa liität sen vaiheessa 2 luomaasi tiliin.
4. Kun olet luonut `Application`-sovelluksesi, tallenna client-id ja client secret turvalliseen paikkaan.
</Steps>

## CDN

Winkissä käytämme Cloudinarya kaikille kuville ja videoille. Kun käytät matkavarantoamme, sinulla on täysi pääsy kaikkiin Cloudinaryn edistyneisiin ominaisuuksiin.

Meidän `cloud_name` on `traveliko`.

### Cloudinary

- [Aloitusopas](https://cloudinary.com/documentation/dev_kickstart)
- [SDK:t](https://cloudinary.com/documentation/cloudinary_sdks)
- [Cloudinary GitHubissa](https://github.com/cloudinary)
-	[Video-oppaat](https://cloudinary.com/documentation/cloudinary_sdks_tutorials)

### Esimerkki

Jokaiselle tukemallemme matkavarannon tyypille on sisäkkäinen JSON-taulukko nimeltä `multimedias`. Multimedia-kohteen JSON näyttää tältä:

```json {3}
{
  "multimediaIdentifier": "multimedia-1",
  "identifier": "partners/radisson_blu_logo",
  "type": "IMAGE",
  "width": "1024",
  "height": "768",
  "category": "1",
  "descriptions": [
    {
      "name": "Aula",
      "description": "Kuva aulasta",
      "language": "en"
    }
  ],
  "lifestyleType": "LIFESTYLE_BUSINESS",
  "attribution": [
    {
      "url": "https://www.hilton.com",
      "name": "Hilton"
    }
  ]
}
```

Korostettu rivi näyttää Cloudinaryn yksilöllisen tunnisteen `partners/radisson_blu_logo`. Se on kaikki, mitä tarvitset kuvan hakemiseen missä tahansa muodossa, laadussa ja koossa.

## Testaus

Siirry [API-rajapintojemme](/fi/developer/apis) osioon ja valitse API, jota haluat käyttää.

### API-dokumentaatio

Dokumentaatiosivustomme on järjestetty siten, että voit suorittaa API-komentoja suoraan sivustolta.

Tässä esimerkissä haluat käyttää `Search Lookups (OAuth2)` API-kutsua.

:::tip[Pro Vinkki]
Käytön helpottamiseksi suosittelemme, että integraattorit käyttävät päätepisteitä, jotka on merkitty `OAuth2`:ksi. Nämä päätepisteet tunnistavat API-kutsujat ja tietävät, millä tilillä olet, joten sinun ei tarvitse määrittää `companyIdentifier`-arvoa URL-osoitteissasi.
:::

<Steps>
1. Käytä [Lookup API:a](https://developer.wink.travel/lookup) hakemaan kohteita tai hotelleja.
2. Vasemman sivupalkin valikosta valitse `Authentication`.
3. Syötä client-id ja client secret ja klikkaa `Get TOKEN` -painiketta.
4. Jos tunnistetietosi ovat voimassa, näet, että API-avaimesi on otettu käyttöön.
5. Voit nyt testata lookup-päätepistettä.
</Steps>

<figure>
<CloudinaryImage
      width="700"
      height="265"
      resize="scale"
      quality="best"
      alt="Lookup API -päätepiste"
      src="academy/lookup-api-call"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Esimerkkihaku Lookups (OAuth2)*</figcaption>
</figure>

### Postman
Voit tehdä saman myös Postmanilla.

<Steps>
1. Lataa [Postman](https://www.postman.com/downloads).
2. Klikkaa `Download OpenAPI spec` [Lookup API](https://developer.wink.travel/lookup) -sivun yläreunasta.
3. Tuo se Postmaniin.
4. Jos tuot sen uutena kokoelmana nimeltä `Wink API`, klikkaa kokoelman nimen vieressä olevaa vaakasuoraa kolmen pisteen valikkoa ja valitse `Edit`.
5. `Authorization`-välilehdellä aseta `Auth type` arvoksi OAuth2.
6. Aseta kenttään `Add auth data to` arvo `Request headers`.
7. Aseta kenttään `Header prefix` arvo `Bearer`.
8. Aseta kenttään `Token Name` haluamasi nimi tallennetulle tokenille Postmanissa, esim. Wink Staging.
9. Aseta kenttään `Grant type` arvo `Client Credentials`.
10. Aseta kenttään `Access token URL` arvo https://staging-iam.wink.travel/oauth2/token.
11. Aseta kenttään `Client ID` sovelluksesi luoma Client ID.
12. Aseta kenttään `Client Secret` sovelluksesi luoma Client Secret.
13. Aseta kenttään `Scope` arvoksi `inventory.read inventory.write inventory.remove`. Nämä ovat kaikki Winkille tarvittavat oikeudet.
14. Aseta kenttään `Client Authentication` arvo `Send as Basic Auth header`.
15. Klikkaa `Get New Access Token` -painiketta hakeaksesi tokenin ja tallenna se.
16. Kaikissa Wink API -kokoelman API-kutsuissa varmista, että autentikointivälilehdellä lukee `Inherit auth from parent`, jotta token sisältyy jokaiseen kutsuun.
</Steps>

:::tip[Pro Vinkki]
On suositeltavaa tehdä palvelimen domain, client ID ja client secret ympäristömuuttujiksi. Näin voit helposti vaihtaa testaus- ja tuotantoympäristöjen välillä ja käyttää uudelleen kaikkia luomiasi toimintoja.
:::
