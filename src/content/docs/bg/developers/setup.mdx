---
title: Настройка
description: Тази статия показва как бързо да се настроите като разработчик и да започнете да тествате нашите API-та в Wink.
sidebar:
  order: 1
---

import { Steps } from '@astrojs/starlight/components';
import CloudinaryImage from '/src/components/cloudinary-image.astro';

Тази статия показва как бързо да се настроите като разработчик и да започнете да тествате нашите API-та в Wink.

:::note
Тестването винаги трябва да се извършва в нашата [стейджинг среда](/getting-started/environments). Там има много по-малко данни, но можете да тествате колкото искате, без да натоварвате продукционната среда.

Когато сте готови да преминете на живо, ние ще сертифицираме вашия акаунт и приложението ви и можете да стартирате в продукционната среда.
:::

Следвайте тези стъпки:

<Steps>
1. [Регистрирайте се](/user/register) с вашия потребителски акаунт в Wink
2. Създайте [акаунт за туристически агент](/travel-agent/what-is-agent) или [партньорски акаунт](/studio/what-is-studio).
3. [Създайте приложение](/developer/applications), като го свържете с акаунта, който създадохте в Стъпка 2.
4. След като създадете вашето `Application`, запазете client-id и client secret на сигурно място.
</Steps>

## CDN

В Wink използваме Cloudinary за всички наши изображения и видео материали. Когато имате достъп до нашия туристически инвентар, ще имате пълен достъп до всички разширени функции на Cloudinary.

Нашият `cloud_name` е `traveliko`.

### Cloudinary

- [Започване](https://cloudinary.com/documentation/dev_kickstart)
- [SDK-та](https://cloudinary.com/documentation/cloudinary_sdks)
- [Cloudinary в GitHub](https://github.com/cloudinary)
-	[Видео уроци](https://cloudinary.com/documentation/cloudinary_sdks_tutorials)

### Пример

За всеки тип туристически инвентар, който поддържаме, има вложен JSON масив, наречен `multimedias`. JSON за мултимедиен запис изглежда така:

```json {3}
{
  "multimediaIdentifier": "multimedia-1",
  "identifier": "partners/radisson_blu_logo",
  "type": "IMAGE",
  "width": "1024",
  "height": "768",
  "category": "1",
  "descriptions": [
    {
      "name": "Lobby",
      "description": "Picture of the lobby",
      "language": "en"
    }
  ],
  "lifestyleType": "LIFESTYLE_BUSINESS",
  "attribution": [
    {
      "url": "https://www.hilton.com",
      "name": "Hilton"
    }
  ]
}
```

Подчертаната линия по-горе показва уникалния Cloudinary ID `partners/radisson_blu_logo`. Това е всичко, което ви трябва, за да извлечете изображението във всеки формат, качество и размер, който желаете.

## Тестване

Отидете в нашия раздел [APIs](/developer/apis) и изберете API-то, с което искате да работите.

### API документация

Нашият сайт с документация е настроен така, че можете да изпълнявате API команди директно от сайта.

В този пример искате да използвате API повикването `Search Lookups (OAuth2)`.

:::tip[Професионален съвет]
За по-лесна употреба препоръчваме интеграторите да използват крайните точки, които обозначаваме като `OAuth2`. Тези крайни точки знаят, че очакват API повикващи и вече знаят към кой акаунт принадлежите, така че не е нужно да посочвате `companyIdentifier` в URL адресите си.
:::

<Steps>
1. Използвайте [Lookup API](https://developer.wink.travel/lookup), за да извлечете дестинации или хотели.
2. В лявата навигационна лента кликнете на `Authentication`.
3. Въведете вашия client-id и client secret и натиснете бутона `Get TOKEN`.
4. Ако вашите данни за достъп са валидни, ще видите, че вашият API ключ е приложен.
5. Сега можете да тествате lookup крайния пункт.
</Steps>

<figure>
<CloudinaryImage
      width="700"
      height="265"
      resize="scale"
      quality="best"
      alt="Lookup API endpoint"
      src="academy/lookup-api-call"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Пример за Search Lookups (OAuth2)*</figcaption>
</figure>

### Postman
Можете да направите същото и с Postman.

<Steps>
1. Изтеглете [Postman](https://www.postman.com/downloads).
2. Кликнете на `Download OpenAPI spec` в горната част на страницата на [Lookup API](https://developer.wink.travel/lookup).
3. Импортирайте го в Postman.
4. Ако сте го импортирали като нова колекция с име `Wink API`, кликнете на хоризонталните елипси (3 точки) до името на колекцията и изберете `Edit`.
5. В раздела `Authorization` задайте `Auth type` на OAuth2.
6. Задайте полето `Add auth data to` на `Request headers`.
7. Задайте полето `Header prefix` на `Bearer`.
8. Задайте полето `Token Name` на каквото искате да наименувате запазения си токен в Postman, например Wink Staging.
9. Задайте полето `Grant type` на `Client Credentials`.
10. Задайте полето `Access token URL` на https://staging-iam.wink.travel/oauth2/token.
11. Задайте полето `Client ID` на Client ID, който вашето приложение е генерирало.
12. Задайте полето `Client Secret` на Client Secret, който вашето приложение е генерирало.
13. Задайте полето `Scope` на `inventory.read inventory.write inventory.remove`. Това са всички необходими обхвати за Wink.
14. Задайте полето `Client Authentication` на `Send as Basic Auth header`.
15. Натиснете бутона `Get New Access Token`, за да получите токена и го запазете.
16. За всички API повиквания в колекцията Wink API, уверете се, че разделът за удостоверяване казва `Inherit auth from parent`, за да включва вашия токен при всяко повикване.
</Steps>

:::tip[Професионален съвет]
Препоръчително е да направите домейна на сървъра, client ID и client secret като променливи на средата. По този начин лесно можете да превключвате между стейджинг и продукционна среда и да използвате повторно всички операции, които сте създали.
:::
