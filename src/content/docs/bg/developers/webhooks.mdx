---
title: Уебхукове
description: Абонирайте се за събития от Wink и TripPay.
sidebar:
  order: 4
---

import { Steps } from '@astrojs/starlight/components';
import CloudinaryImage from '/src/components/cloudinary-image.astro';

Уебхуковете са начин да получавате и реагирате на събития в реално време от Wink и TripPay, свързани с вашия акаунт.

## Пример

<Steps>
1. Настъпва резервация в Wink.
1. Изпраща се събитието на Wink `booking.created`.
2. Вашата система активно слуша това събитие.
3. Вашата система проследява собствен набор от анализи и използва това събитие, за да актуализира своята база данни с времеви серии.
</Steps>

<figure>
<CloudinaryImage
      width="350"
      height="215"
      resize="scale"
      quality="best"
      alt="Примерен уебхук"
      src="academy/webhook"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Примерен запис на уебхук*</figcaption>
</figure>

:::note
Уебхук на Wink е различен от уебхук на TripPay.

- Ако искате да слушате събития от Wink, можете да създадете уебхук от [Extranet](https://extranet.wink.travel) или [Studio](https://studio.wink.travel).
- Ако искате да слушате събития от TripPay, можете да създадете уебхук от [Payment](https://pay.wink.travel).
:::

*За този пример ще се удостоверим чрез [Studio](https://studio.wink.travel).*

<Steps>
1. След удостоверяване, кликнете върху иконата на профила си в горния десен ъгъл и ще се появи меню.
2. Кликнете върху линка `Webhooks`.
3. Ще бъдете пренасочени към страницата с вашите уебхукове.
</Steps>

## Създаване на уебхук

:::caution
Трябва да създадете афилиейт акаунт в Wink или акаунт в TripPay, преди да създадете уебхук, тъй като ще свързвате уебхука с конкретен акаунт.
:::

Ето стъпките за създаване на уебхук:

<Steps>
1. От страницата с уебхукове кликнете бутона `Create new webhook`.
2. ***Име*** Дайте име на уебхука си. *напр. Wink Stalker*
3. ***Активиране*** Оставете както е, за да бъде активиран.
4. **Име на обекта** Свържете уебхука си с един от съществуващите ви акаунти. *напр. Cool Account*
5. **Събития** Слушайте събитията, които ви интересуват. *напр. `booking.created`*
6. **URL на уебхук** Въведете URL адреса, на който ще слушате събитията от нас. *напр. `https://my.system.com/webhook/wink`*
7. Кликнете бутона `Save`, за да продължите.
</Steps>

Ще бъдете пренасочени обратно към списъка с уебхукове и новият ви уебхук е готов за използване.

## Актуализиране на уебхук

Ще трябва да актуализирате приложението си, ако искате да:

- Деактивирате уебхука си.
- Слушате повече или по-малко събития.
- Промените URL адреса, на който слушате уебхука.

За да актуализирате съществуващ уебхук, направете следното:

<Steps>
1. Кликнете линка `Actions` за уебхука, който искате да актуализирате.
2. Кликнете бутона `Update` под Actions.
3. Направете промените в уебхука.
4. Кликнете бутона `Save`, за да продължите.
</Steps>

Ще бъдете пренасочени обратно към списъка с уебхукове.

## Премахване на уебхук

Ако вече нямате нужда от уебхука, можете да го премахнете.

За да премахнете уебхук, направете следното:

<Steps>
1. Кликнете линка `Actions` за уебхука, който искате да премахнете.
2. Кликнете бутона `Remove` под Actions.
3. Кликнете бутона `OK`, за да потвърдите изтриването.
</Steps>

Ще бъдете пренасочени обратно към списъка с уебхукове.
