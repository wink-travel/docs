---
title: TripPay के साथ एकीकरण
description: यह लेख TripPay के साथ एकीकरण करने और भुगतान को संभालने का पूरा उदाहरण प्रदान करता है।
sidebar:
  order: 4
---

import { Steps } from '@astrojs/starlight/components';

यह लेख TripPay के साथ एक अंत-से-अंत उदाहरण प्रदान करता है।

यह अनुशंसित है कि आपने पहले से पढ़ा हो:

- [Payment > Mapping](/hi/payment/mapping).
- [Payment > Integration](/hi/payment/integration).
- [Payment Web Component](/hi/developers/web-components/#payment).
- [Payment API](/hi/developers/apis/#payment-api). *`Create payable contracts` अनुभाग पढ़ें*

यहाँ सफलतापूर्वक TripPay का उपयोग करके बुकिंग के लिए भुगतान करने के चरण हैं:

<Steps>
1. सुनिश्चित करें कि आपने बुकिंग अनुबंध में जिन लाभार्थियों का उल्लेख किया है, वे मैप किए गए हैं।
2. यात्री को वह इन्वेंटरी चुनने दें जिसे वे बुक करना चाहते हैं और उन्हें भुगतान के लिए तैयार करें।
3. TripPay के साथ एक `payable contract` बनाएं जिसमें बुक किए जाने वाले आइटम शामिल हों।
4. यात्री को TripPay वेब कंपोनेंट का उपयोग करके भुगतान करने दें।
</Steps>

हम मानते हैं कि आपने पहले ही `चरण 1` और `चरण 2` पूरा कर लिया है और TripPay को बुकिंग के बारे में सूचित करने के लिए तैयार हैं।

## भुगतान योग्य अनुबंध बनाएं

:::note
भुगतान योग्य अनुबंध बनाने की आवश्यकताओं के बारे में अधिक जानने के लिए Payment API पर जाएं।
:::

### अनुरोध
यहाँ एक JSON नमूना अनुरोध है जिसमें आपके पहले भुगतान योग्य अनुबंध के लिए आवश्यक सभी चीजें शामिल हैं।

```json {3-6, 8-9}
{
  "user": {
    "userIdentifier": "191d5729-0b90-4000-85df-1bea7a6e9a01",
    "firstName": "John",
    "lastName": "Smith",
    "email": "john.smith@email.com"
  },
  "affiliateAccountIdentifier": "291d5729-0b91-4001-95df-2bec7a6e9a01",
  "affiliateAccountIdentifierType": "INTERNAL",
  "displayCurrency": "USD",
  "traceId": "trace-1",
  "redirectUrl": "/thank-you",
  "sourceUrl": "https://www.travel.com",
  "contractList": [
    {
      "identifier": "191d5729-0b90-4000-8298-72431beb1701",
      "supplierIdentifier": "191d5729-0b90-4000-8b72-58186a642401",
      "supplierIdentifierType": "EXTERNAL",
      "contractItemList": [
        {
          "user": {
            "userIdentifier": "191d5729-0b90-4000-8596-ed18f9876801",
            "firstName": "John",
            "lastName": "Smith",
            "email": "john.smith@email.com",
            "telephone": "+1 212 555 1212",
          },
          "nameInEnglish": "Deluxe King",
          "descriptionInEnglish": "This is the best deluxe king that money can buy.",
          "price": {
            "amount": 100,
            "currency": "USD"
          },
          "itinerary": {
            "startDate": "2024-12-24T00:00:00.000Z",
            "endDate": "2024-12-25T00:00:00.000Z",
            "adults": 2
          },
          "pricingType": "PER_STAY",
          "type": "LODGING",
          "payable": "PREPAY",
          "policy": {
            "refundable": true
          },
          "externalIdentifier": "room-type-1",
          "dailyRateList": [
            {
              "date": "2024-12-24",
              "price": {
                "amount": 100,
                "currency": "USD"
              }
            }
          ],
          "beneficiaryList": [
            {
              "identifier": "account-0",
              "identifierType": "INTERNAL",
              "amountDue": {
                "type": "PERCENTAGE",
                "percent": 0.015
              },
              "type": "PLATFORM_FEE"
            },
            {
              "identifier": "account-1",
              "identifierType": "INTERNAL",
              "amountDue": {
                "type": "PERCENTAGE",
                "percent": 0.0985
              },
              "type": "COMMISSION"
            },
            {
              "identifier": "account-2",
              "identifierType": "INTERNAL",
              "amountDue": {
                "type": "PERCENTAGE",
                "percent": 0.8865
              },
              "type": "SALE"
            }
          ]
        }
      ]
    }
  ]
}
```

व्याख्या:

हम यहाँ हर डेटा पॉइंट की व्याख्या नहीं करेंगे क्योंकि वे पहले से ही API दस्तावेज़ों में कवर किए गए हैं।

- पंक्तियाँ: **2 - 7** वह उपयोगकर्ता है जो बुकिंग के लिए जिम्मेदार है। बुकर्स के दो प्रकार होते हैं:
    - यात्री।
    - ट्रैवल एजेंट।
- पंक्तियाँ: **8 - 9** वह TripPay खाता है जो बुकिंग को सुगम बनाता है। यह हो सकता है:
    - आपका TripPay इंटीग्रेटर खाता।
    - यदि आप एक एफिलिएट नेटवर्क चलाते हैं, तो यह आपका एफिलिएट हो सकता है।
- `traceId` का उपयोग कई आपूर्तिकर्ताओं के बीच कई बुकिंग को समूहित करने के लिए करें। इस तरह आप समूह बुकिंग रद्द कर सकते हैं।
- `redirectUrl` TripPay को बताता है कि भुगतान पूरा होने के बाद किस पृष्ठ पर पुनः निर्देशित करना है।
- `sourceUrl` वह साइट / ऐप है जहाँ बुकिंग हुई।

`contractList` एरे में वे आइटम शामिल हैं जिन्हें यात्री कई आपूर्तिकर्ताओं से खरीदना चाहता है। प्रत्येक आइटम में शामिल हैं:

- `identifier` एक मान्य UUID है जिसे आप जनरेट करते हैं।
- वह आपूर्तिकर्ता जिससे आप इन्वेंटरी बुक करना चाहते हैं।
- उस आपूर्तिकर्ता से बुक की जाने वाली इन्वेंटरी। ये सभी नेस्टेड एरे `contractItemList` में निर्दिष्ट हैं।
- `contractItemList` के अंतर्गत प्रत्येक प्रविष्टि में शामिल हैं:
    - **अतिथि उपयोगकर्ता** यह वह उपयोगकर्ता है जो परिसर में आएगा।
    - **अंग्रेज़ी में नाम** इन्वेंटरी का अंग्रेज़ी भाषा में नाम।
    - **अंग्रेज़ी में विवरण** इन्वेंटरी का अंग्रेज़ी भाषा में विस्तृत विवरण।
    - **मूल्य** आइटम की कीमत।
    - **यात्रा कार्यक्रम** जब यह आइटम बुक किया जाना चाहिए।
    - **मूल्य निर्धारण प्रकार** कीमत कैसे गणना की गई।
    - **इन्वेंटरी प्रकार** यह किस प्रकार की इन्वेंटरी है।
    - **भुगतान योग्य** जब यात्री से शुल्क लिया जाना चाहिए। *हम वर्तमान में केवल तत्काल भुगतान विकल्पों का समर्थन करते हैं।*
    - **नीति** रद्द करने की नीति नियम शामिल करें।
    - **दैनिक दर सूची** यदि बुक किया जा रहा आइटम एक कमरा है, तो आप यह शामिल कर सकते हैं कि अतिथि के ठहरने की प्रत्येक रात के लिए उस कमरे की कीमत कितनी है।
    - **लाभार्थी** यह शामिल करें कि कौन से TripPay खाते को आइटम की कीमत का कौन सा हिस्सा आवंटित किया जाना चाहिए। *फिक्स्ड / प्रतिशत राशि समर्थित हैं।*

:::note
ऊपर दिए गए JSON उदाहरण में, हमारे पास 3 लाभार्थी हैं:

- 1.5% उस प्लेटफ़ॉर्म को आवंटित किया गया जिसने बुकिंग को सुगम बनाया। *जैसे Wink*
- 9.85% एफिलिएट को कमीशन के रूप में आवंटित किया गया। *जैसे Kim Kardashian*
- 88.65% आपूर्तिकर्ता को कमरे की बुकिंग के लिए आवंटित किया गया। *जैसे Hilton*

जब TripPay भुगतान योग्य अनुबंध के साथ प्रतिक्रिया करता है, तो आप देखेंगे कि उसने अपने स्वयं के लाभार्थी को 4.0% पर जोड़ा है।
:::

### प्रतिक्रिया

जब TripPay आपके अनुरोध का जवाब देता है, तो यह कुछ इस तरह दिखेगा:

```json {3}
[
  {
    "id": "contract-1",
    "traceId": "trace-1",
    "supplierContractIdentifier": "191d5729-0b90-4000-8298-72431beb1701",
    "supplierIdentifier": "191d5729-0b90-4000-8b72-58186a642401",
    "supplierName": "Hilton",
    "totalPrice": {
      "amount": 100,
      "currency": "USD"
    },
    "totalDisplayPrice": {
      "amount": 100,
      "currency": "USD"
    },
    "totalSupplierPrice": {
      "amount": 100,
      "currency": "USD"
    },
    "totalInternalPrice": {
      "amount": 100,
      "currency": "USD"
    },
    "totalCapturePrice": {
      "amount": 100,
      "currency": "USD"
    }
  }
]
```

लाइन 3 पर `id` को सहेजें। आप इसे TripPay वेब कंपोनेंट में इंजेक्ट करने के लिए उपयोग करेंगे।

## TripPay एम्बेड करें

:::note
सुनिश्चित करें कि आपने पहले से हमारे स्टाइल और जावास्क्रिप्ट लोड कर लिए हैं।
:::

इस बिंदु पर, आप अपनी वेबसाइट में `Payment Web Component` एम्बेड करने और उपयोगकर्ता को दिखाने के लिए तैयार हैं।

```html
<trip-pay id="contract-1"></trip-pay>
```

जहाँ तक एकीकरण की बात है, आपको बस इतना ही करना है। यहाँ से सभी भारी काम TripPay द्वारा किया जाएगा।
