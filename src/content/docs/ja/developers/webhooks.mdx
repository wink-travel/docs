---
title: Webhooks
description: Wink および TripPay イベントを購読します。
sidebar:
  order: 4
---
import { Steps } from '@astrojs/starlight/components';
import CloudinaryImage from '../../../components/cloudinary-image.astro';

Webhook は、アカウントに関する Wink および TripPay からのリアルタイム イベントを受信して反応する方法です。

## 例

<Steps>
  1. Wink上で予約が行われます。
  2. ウィンクイベント `booking.created` が発送されます。
  3. システムはこのイベントをアクティブにリッスンしています。
  4. システムは独自の分析セットを追跡し、このイベントを使用して時系列データベースを更新します。
</Steps>


<figure>
  <CloudinaryImage width="350" height="215" resize="scale" quality="best" alt="サンプルウェブフック" src="academy/webhook" errorImage="noimage_opaque_nyrtl0.png" />

  <figcaption>*サンプルWebhookエントリ*</figcaption>
</figure>


:::注
Wink の Webhook は TripPay の Webhook とは異なります。

* Winkイベントをリッスンしたい場合は、[エクストラネット](https://extranet.wink.travel) または [スタジオ](https://studio.wink.travel)。
* TripPayイベントをリッスンしたい場合は、[支払い](https://pay.wink.travel)。
  :::

*この例では、[スタジオ](https://studio.wink.travel)。*

<Steps>
  1. 認証されると、右上隅にあるプロフィールアイコンをクリックすると、メニューが表示されます。
  2. クリック `Webhooks` リンク。
  3. Webhook ページにリダイレクトされます。
</Steps>


## Webhookを作成する

:::注意
Webhookを作成する前に、WinkのアフィリエイトアカウントまたはTripPayのアカウントを作成する必要があります。Webhookは特定のアカウントに紐付けられるためです。
:::

Webhook を作成する手順は次のとおりです。

<Steps>
  1. Webhooksページで、 `Create new webhook` ボタン。
  2. ***名前*** Webhook に名前を付けます。 *例：ウィンク・ストーカー*
  3. ***有効にする*** 有効にするには、そのままにしておきます。
  4. **エンティティ名** Webhook を既存のアカウントの 1 つにリンクします。 *例：クールアカウント*
  5. **イベント** 興味のあるイベントを聞いてください。 *例えば `booking.created`*
  6. **ウェブフックURL** 弊社のイベントを視聴する URL を入力してください。 *例えば `https://my.system.com/webhook/wink`*
  7. クリック `Save` 続行するにはボタンをクリックしてください。
</Steps>


Webhook のリストにリダイレクトされ、新しい Webhook が使用できるようになります。

## ウェブフックを更新する

以下の場合はアプリを更新する必要があります。

* Webhook を無効にします。
* もっと多くの/より少ないイベントをリッスンします。
* リスニング Webhook URL を変更します。

既存の Webhook を更新するには、次の手順を実行します。

<Steps>
  1. クリック `Actions` 更新する Webhook のリンク。
  2. クリック `Update` \[アクション] の下のボタンをクリックします。
  3. Webhook に変更を加えます。
  4. クリック `Save` 続行するにはボタンをクリックしてください。
</Steps>


Webhook のリストにリダイレクトされます。

## Webhookを削除する

Webhook を今後使用しない場合は、削除しても構いません。

Webhook を削除するには、次の手順を実行します。

<Steps>
  1. クリック `Actions` 更新する Webhook のリンク。
  2. クリック `Remove` \[アクション] の下のボタンをクリックします。
  3. クリック `OK` 削除を確認するボタン。
</Steps>


Webhook のリストにリダイレクトされます。

