---
title: Webコンポーネント
description: Winkは、サイトに埋め込めるJavaScript Webコンポーネントのライブラリを提供しています。
sidebar:
  order: 6
---


import { Steps } from '@astrojs/starlight/components';
import CloudinaryImage from '/src/components/cloudinary-image.astro';

[Web Components](https://developer.mozilla.org/en-US/docs/Web/API/Web_components)は、コーディングの知識がなくてもJavaScriptの機能をウェブサイトに統合できる標準技術です。
このクールな技術のおかげで、Winkの旅行在庫をほとんど手間なく埋め込むことができます。この記事では、当社のWebコンポーネントのコレクションを紹介し、その使い方を説明します。

## Winkの埋め込み

当社のWebコンポーネントを表示したいページには、以下の3つを必ず含めてください。

1. スタイルシートを含める。
2. Javascriptを含める。
3. アプリケーションローダーを含める。

### スタイルシート

ドキュメントのhead内に当社のCSSスタイルを含めてください。

```html {3}
<html>
  <head>
    <link rel="stylesheet" href="https://elements.wink.travel/styles.css"></link>
  </head>
</html>
```

### Javascript

ドキュメントの最後に当社のJavascriptを含めてください。(*終了の&lt;/body&gt;タグ直前を推奨します*)。

```html {3}
<html>
  <body>
    <script src="https://elements.wink.travel/elements.js" type="module" defer></script>
  </body>
</html>
```

これでサイトは当社のWebコンポーネントを表示できる準備が整いました。

## コンポーネント

以下に当社のコンポーネントライブラリについて説明します。

### アプリケーションローダー

ローダーは状態を保持し、コンポーネント間のやり取りを管理します。(*Javascriptの下に含めてください*)。

```html {3-6}
<html>
  <body>
    <wink-app-loader
      client-id="YOUR CLIENT ID GOES HERE"
      configuration-id="YOUR CUSTOMIZATION ID GOES HERE"
    ></wink-app-loader>
  </body>
</html>
```

### コンテンツローダー

コンテンツローダーはWebコンポーネントライブラリの中心です。あなたの在庫（カード、グリッド、マップ）を表示する役割を担います。

利用可能な属性:

- layout
- id
- sort

*属性`sort`はlayoutが`RANKED`の場合のみ利用可能で、既存のランク付けグリッドを使いたくない場合に使用します。その場合、`id`は空にしてください。*

利用可能なレイアウトタイプ:

- `AD_BANNER`
- `MAP`
- `HOTEL`
- `GUEST_ROOM`
- `MEETING_ROOM`
- `SPA`
- `RESTAURANT`
- `ACTIVITY`
- `ATTRACTION`
- `PLACE`
- `ADD_ON`
- `LIST`
- `SEARCH`
- `RANKED`

利用可能なソートタイプ:

- `MEMBER`
- `PRICE_LOW_TO_HIGH`
- `PRICE_HIGH_TO_LOW`
- `PRICE`
- `POPULARITY`
- `ECO`
- `EXPERIENCE`
- `PERK`
- `LOYALTY`
- `PACKAGE`

```html {3-6}
<html>
  <body>
    <wink-content-loader
       layout="GUEST_ROOM"
       id="2de7ee9c-61c9-11ef-9722-42004e494300"
    ></wink-content-loader>
  </body>
</html>
```

[カード](/ja/studio/cards)、[グリッド](/ja/studio/grids)、[マップ](/ja/studio/maps)のサンプルもご覧いただけます。

### ルックアップ

ルックアップはランク付けグリッドと組み合わせて使うのに最適です。ユーザーがホテルや目的地を検索すると、グリッドが検索結果に応じて更新されます。

```html {3}
<html>
  <body>
    <wink-lookup></wink-lookup>
  </body>
</html>
```

<figure>
<CloudinaryImage
      width="350"
      height="57"
      resize="scale"
      quality="best"
      alt="Lookup web component"
      src="academy/lookup"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Lookup web component*</figcaption>
</figure>

上記のコンポーネントをクリックすると、検索したい目的地やホテルを入力できるモーダルが開きます。

<figure>
<CloudinaryImage
      width="700"
      height="186"
      resize="scale"
      quality="best"
      alt="Lookup modal"
      src="academy/lookup-results"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Lookup modal with results*</figcaption>
</figure>

### 旅程

旅程ボタンは現在の旅程をボタン上に表示します。クリックすると、旅程ピッカー全体がモーダルとして表示されます。

```html {3}
<html>
  <body>
    <wink-itinerary></wink-itinerary>
  </body>
</html>
```

<figure>
<CloudinaryImage
      width="350"
      height="60"
      resize="scale"
      quality="best"
      alt="Itinerary web component"
      src="academy/itinerary-button"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Itinerary web component*</figcaption>
</figure>

上記のボタンをクリックすると、旅程を更新できるモーダルが開きます。

<figure>
<CloudinaryImage
      width="700"
      height="459"
      resize="scale"
      quality="best"
      alt="Search modal"
      src="academy/search-modal"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Itinerary picker as modal*</figcaption>
</figure>


### 検索

検索は旅程ピッカーのアイコンのみのボタンです。クリックすると、旅程ピッカー全体がモーダルとして表示されます。

```html {3}
<html>
  <body>
    <wink-search></wink-search>
  </body>
</html>
```

<figure>
<CloudinaryImage
      width="138"
      height="116"
      resize="scale"
      quality="best"
      alt="Search web component"
      src="academy/search-button"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Search web component*</figcaption>
</figure>

上記のボタンをクリックすると、旅程を更新できるモーダルが開きます。

<figure>
<CloudinaryImage
      width="700"
      height="459"
      resize="scale"
      quality="best"
      alt="Search modal"
      src="academy/search-modal"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Itinerary picker as modal*</figcaption>
</figure>

### 旅程フォーム

旅程コンポーネントは、ユーザーが操作できる旅程フォームを表示します。

```html {3}
<html>
  <body>
    <wink-itinerary-form></wink-itinerary-form>
  </body>
</html>
```

<figure>
<CloudinaryImage
      width="700"
      height="90"
      resize="scale"
      quality="best"
      alt="Itinerary formweb component"
      src="academy/itinerary-form"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Itinerary form web component*</figcaption>
</figure>

旅程を変更すると、ページ上に表示されている在庫に対して旅程更新イベントがトリガーされます。

### アカウント

アカウントボタンは、Wink認証をサイトに追加するためのものです。

```html {3}
<html>
  <body>
    <wink-account></wink-account>
  </body>
</html>
```

<figure>
<CloudinaryImage
      width="92"
      height="104"
      resize="scale"
      quality="best"
      alt="Account web component"
      src="academy/account-button"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Account button web component*</figcaption>
</figure>

ユーザーが未認証の場合、ボタンをクリックすると認証ページに遷移します。
認証済みの場合は、ユーザーのプロフィールアイコンが表示されます。

<figure>
<CloudinaryImage
      width="92"
      height="104"
      resize="scale"
      quality="best"
      alt="Account button when authenticated"
      src="academy/account-button-auth"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Account button (authenticated) web component*</figcaption>
</figure>

ボタンをクリックすると、ユーザー固有のドロップダウンが開きます。

<figure>
<CloudinaryImage
      width="350"
      height="404"
      resize="scale"
      quality="best"
      alt="Account button when authenticated"
      src="academy/account-button-auth-open"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Account button (open) web component*</figcaption>
</figure>

## TripPayの埋め込み

TripPayの支払いWebコンポーネントを使用したいページには、以下の2つを必ず含めてください。

1. スタイルシートを含める。
2. Javascriptを含める。

### スタイルシート

ドキュメントのhead内に当社のCSSスタイルを含めてください。

```html {3}
<html>
  <head>
    <link rel="stylesheet" href="https://elements.trippay.io/styles.css"></link>
  </head>
</html>
```

### Javascript

ドキュメントの最後に当社のJavascriptを含めてください。(*終了の&lt;body&gt;タグ直前を推奨します*)。

```html {3}
<html>
  <body>
    <script src="https://elements.trippay.io/elements.js" type="module" defer></script>
  </body>
</html>
```

これでサイトは当社のWebコンポーネントを表示できる準備が整いました。

## コンポーネント

### 支払い

支払いコンポーネントは、旅行者が購入したいものとそのルールや価格をTripPayに通知します。

必須属性は1つです:

- `id` 実行したい予約契約の識別子。

```html {3}
<html>
  <body>
    <trip-pay id="<INSERT_BOOKING_CONTRACT_ID>"></trip-pay>
  </body>
</html>
```

:::note
予約契約の`id`の生成方法については、ガイド[Integrating with TripPay](/ja/guides/integrating-with-trip-pay)を参照してください。
:::

ウィジェットは契約の実行準備を行い、ユーザーに支払い詳細*(図1)*を表示して予約を完了させます。

<figure>
<CloudinaryImage
      width="700"
      height="1141"
      resize="scale"
      quality="best"
      alt="Payment details"
      src="academy/payment-modal"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*図1. 支払いフォームのサンプル*</figcaption>
</figure>

## エラー

WinkLinksやご自身のウェブサイトで当社のWebコンポーネントを埋め込んだ際にエラーメッセージが表示された場合、以下のような原因が考えられます。

### 在庫状況

在庫が利用できなくなっている可能性があります。[Wink Studio](/ja/studio/cards)にアクセスし、「カード」のステータスが利用可能か確認してください。
利用不可の場合は赤く表示されます。その場合は、サプライヤーが再度利用可能にするのを待つか、リストから削除してください。

:::note
`Availability`は予約可能な日ごとの在庫状況を意味するのではなく、在庫が完全に利用不可であることを意味します。
:::

### 削除済み

在庫が削除されている可能性があります。[Wink Studio](/ja/studio/cards)にアクセスし、「カード」のステータスが利用可能か確認してください。
利用不可の場合は赤く表示されます。その場合は、サプライヤーが再度利用可能にするのを待つか、リストから削除してください。

### カスタマイズ

在庫に関連付けたカスタマイズを誤って削除している可能性があります。カスタマイズがまだ利用可能か確認し、欠落している場合は新しいものを設定してください。

### アプリケーション

これはウェブ開発者向けの内容です。誤って[Application](/ja/developer/applications)を削除し、クライアントIDが利用できなくなった場合は、新しいアプリケーションを作成し、新しいクライアントIDを使ってWebコンポーネントを埋め込んでください。
