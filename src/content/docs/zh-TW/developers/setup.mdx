---
title: 設定
description: 本文說明如何快速以開發者身份設定並開始在 Wink 上測試我們的 API。
sidebar:
  order: 1
---

import { Steps } from '@astrojs/starlight/components';
import CloudinaryImage from '/src/components/cloudinary-image.astro';

本文說明如何快速以開發者身份設定並開始在 Wink 上測試我們的 API。

:::note
測試應始終在我們的 [測試環境](/getting-started/environments) 進行。那裡的資料較少，但您可以自由測試，不會影響生產環境。

當您準備好上線時，我們將認證您的帳戶和應用程式，您即可在生產環境中啟動。
:::

請依照以下步驟操作：

<Steps>
1. 在 Wink 上 [註冊](/user/register) 您的使用者帳號
2. 建立 [旅行社帳號](/travel-agent/what-is-agent) 或 [旅行社帳號](/travel-agent/what-is-agent) 。
3. [建立應用程式](/developer/applications) ，並將其與步驟 2 中建立的帳號關聯。
4. 建立 `Application` 後，請妥善保存 client-id 和 client secret。
</Steps>

## CDN

在 Wink，我們使用 Cloudinary 管理所有圖片和影片資產。當您存取我們的旅遊庫存時，將可完整使用 Cloudinary 的所有進階功能。

我們的 `cloud_name` 是 `traveliko`。

### Cloudinary

- [快速入門](https://cloudinary.com/documentation/dev_kickstart)
- [SDKs](https://cloudinary.com/documentation/cloudinary_sdks)
- [Cloudinary 在 GitHub](https://github.com/cloudinary)
-	[影片教學](https://cloudinary.com/documentation/cloudinary_sdks_tutorials)

### 範例

對於我們支援的每種旅遊庫存類型，都會有一個名為 `multimedias` 的巢狀 JSON 陣列。多媒體項目的 JSON 範例如下：

```json {3}
{
  "multimediaIdentifier": "multimedia-1",
  "identifier": "partners/radisson_blu_logo",
  "type": "IMAGE",
  "width": "1024",
  "height": "768",
  "category": "1",
  "descriptions": [
    {
      "name": "Lobby",
      "description": "Picture of the lobby",
      "language": "en"
    }
  ],
  "lifestyleType": "LIFESTYLE_BUSINESS",
  "attribution": [
    {
      "url": "https://www.hilton.com",
      "name": "Hilton"
    }
  ]
}
```

上方標示的行顯示了 Cloudinary 的唯一 ID `partners/radisson_blu_logo`。您只需此 ID 即可取得任何格式、品質與尺寸的圖片。

## 測試

請前往我們的 [API](/developer/apis) 區域，選擇您想使用的 API。

### API 文件

我們的文件網站設計可讓您直接在網站內執行 API 指令。

此範例中，您將使用 `Search Lookups (OAuth2)` API 呼叫。

:::tip[專家提示]
為方便使用，我們建議整合者使用標示為 `OAuth2` 的端點。這些端點會自動辨識 API 呼叫者及其帳號，無需在 URL 中指定 `companyIdentifier`。
:::

<Steps>
1. 使用 [Lookup API](https://developer.wink.travel/lookup) 取得目的地或飯店資料。
2. 在左側導覽列點選 `Authentication`。
3. 輸入您的 client-id 和 client secret，然後點擊 `Get TOKEN` 按鈕。
4. 若憑證有效，您將看到 API 金鑰已套用。
5. 現在即可測試 lookup 端點。
</Steps>

<figure>
<CloudinaryImage
      width="700"
      height="265"
      resize="scale"
      quality="best"
      alt="Lookup API 端點"
      src="academy/lookup-api-call"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Search Lookups (OAuth2) 範例*</figcaption>
</figure>

### Postman
您也可以使用 Postman 進行相同操作。

<Steps>
1. 下載 [Postman](https://www.postman.com/downloads) 。
2. 在 [Lookup API](https://developer.wink.travel/lookup) 頁面頂端點選 `Download OpenAPI spec`。
3. 將其匯入 Postman。
4. 若匯入為名為 `Wink API` 的新集合，點擊集合名稱旁的橫向省略符號（三點），選擇 `Edit`。
5. 在 `Authorization` 標籤中，將 `Auth type` 設為 OAuth2。
6. 將 `Add auth data to` 設為 `Request headers`。
7. 將 `Header prefix` 設為 `Bearer`。
8. 將 `Token Name` 設為您想在 Postman 中儲存的名稱，例如 Wink Staging。
9. 將 `Grant type` 設為 `Client Credentials`。
10. 將 `Access token URL` 設為 https://staging-iam.wink.travel/oauth2/token。
11. 將 `Client ID` 設為您的應用程式所產生的 Client ID。
12. 將 `Client Secret` 設為您的應用程式所產生的 Client Secret。
13. 將 `Scope` 設為 `inventory.read inventory.write inventory.remove`。這些是 Wink 所需的所有權限範圍。
14. 將 `Client Authentication` 設為 `Send as Basic Auth header`。
15. 點擊 `Get New Access Token` 按鈕以取得並儲存您的存取權杖。
16. 在 Wink API 集合下的所有 API 呼叫中，確保認證標籤顯示 `Inherit auth from parent`，以便每次呼叫都包含您的權杖。
</Steps>

:::tip[專家提示]
建議將伺服器網域、Client ID 和 Client Secret 設為環境變數。如此一來，您可以輕鬆在測試與生產環境間切換，並重複使用所有已建立的操作。
:::
