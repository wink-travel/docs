---
title: Настройка
description: В этой статье показано, как быстро настроиться в качестве разработчика и начать тестировать наши API на Wink.
sidebar:
  order: 1
---

import { Steps } from '@astrojs/starlight/components';
import CloudinaryImage from '/src/components/cloudinary-image.astro';

В этой статье показано, как быстро настроиться в качестве разработчика и начать тестировать наши API на Wink.

:::note
Тестирование всегда должно проводиться в нашем [тестовом окружении](/getting-started/environments). Там данных гораздо меньше, но вы можете тестировать сколько угодно, не влияя на рабочее окружение.

Когда вы будете готовы к запуску, мы сертифицируем ваш аккаунт и ваше приложение, и вы сможете запустить их в рабочем окружении.
:::

Выполните следующие шаги:

<Steps>
1. [Зарегистрируйте](/user/register) свой пользовательский аккаунт на Wink
2. Создайте [аккаунт турагента](/travel-agent/what-is-agent) или [партнёрский аккаунт](/studio/what-is-studio).
3. [Создайте приложение](/developer/applications), связав его с аккаунтом, который вы создали на шаге 2.
4. После создания `Application` сохраните client-id и client secret в надежном месте.
</Steps>

## CDN

В Wink мы используем Cloudinary для всех наших изображений и видео. При доступе к нашему туристическому инвентарю вы получите полный доступ ко всем расширенным функциям Cloudinary.

Наш `cloud_name` — `traveliko`.

### Cloudinary

- [Начало работы](https://cloudinary.com/documentation/dev_kickstart)
- [SDK](https://cloudinary.com/documentation/cloudinary_sdks)
- [Cloudinary на GitHub](https://github.com/cloudinary)
-	[Видеоуроки](https://cloudinary.com/documentation/cloudinary_sdks_tutorials)

### Пример

Для каждого типа туристического инвентаря, который мы поддерживаем, существует вложенный JSON-массив под названием `multimedias`. JSON для одного мультимедийного элемента выглядит так:

```json {3}
{
  "multimediaIdentifier": "multimedia-1",
  "identifier": "partners/radisson_blu_logo",
  "type": "IMAGE",
  "width": "1024",
  "height": "768",
  "category": "1",
  "descriptions": [
    {
      "name": "Lobby",
      "description": "Picture of the lobby",
      "language": "en"
    }
  ],
  "lifestyleType": "LIFESTYLE_BUSINESS",
  "attribution": [
    {
      "url": "https://www.hilton.com",
      "name": "Hilton"
    }
  ]
}
```

Выделенная строка выше показывает уникальный ID Cloudinary `partners/radisson_blu_logo`. Это всё, что нужно, чтобы получить изображение в любом формате, качестве и размере.

## Тестирование

Перейдите в раздел наших [API](/developer/apis) и выберите API, с которым хотите работать.

### Документация API

Наш сайт документации устроен так, что вы можете выполнять API-запросы прямо с сайта.

В этом примере вы хотите использовать вызов API `Search Lookups (OAuth2)`.

:::tip[Полезный совет]
Для удобства мы рекомендуем интеграторам использовать конечные точки, которые мы обозначаем как `OAuth2`. Эти конечные точки знают, что вызывают API, и уже знают, в каком аккаунте вы находитесь, поэтому вам не нужно указывать `companyIdentifier` в URL.
:::

<Steps>
1. Используйте [Lookup API](https://developer.wink.travel/lookup) для получения данных о направлениях или отелях.
2. В левой навигационной панели нажмите на `Authentication`.
3. Введите client-id и client secret и нажмите кнопку `Get TOKEN`.
4. Если ваши учетные данные верны, вы увидите, что ваш API-ключ применён.
5. Теперь вы можете тестировать endpoint lookup.
</Steps>

<figure>
<CloudinaryImage
      width="700"
      height="265"
      resize="scale"
      quality="best"
      alt="Endpoint Lookup API"
      src="academy/lookup-api-call"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Пример Search Lookups (OAuth2)*</figcaption>
</figure>

### Postman
То же самое можно сделать с помощью Postman.

<Steps>
1. Скачайте [Postman](https://www.postman.com/downloads).
2. Нажмите `Download OpenAPI spec` в верхней части страницы [Lookup API](https://developer.wink.travel/lookup).
3. Импортируйте его в Postman.
4. Если вы импортировали его как новую коллекцию с названием `Wink API`, нажмите на горизонтальное меню (3 точки) рядом с названием коллекции и выберите `Edit`.
5. На вкладке `Authorization` установите `Auth type` в OAuth2.
6. Установите поле `Add auth data to` в `Request headers`.
7. Установите поле `Header prefix` в `Bearer`.
8. В поле `Token Name` введите любое имя для сохранённого токена в Postman, например, Wink Staging.
9. В поле `Grant type` выберите `Client Credentials`.
10. В поле `Access token URL` укажите https://staging-iam.wink.travel/oauth2/token.
11. В поле `Client ID` введите Client ID, который сгенерировало ваше приложение.
12. В поле `Client Secret` введите Client Secret, который сгенерировало ваше приложение.
13. В поле `Scope` укажите `inventory.read inventory.write inventory.remove`. Это все необходимые права для Wink.
14. В поле `Client Authentication` выберите `Send as Basic Auth header`.
15. Нажмите кнопку `Get New Access Token`, чтобы получить токен и сохранить его.
16. Для всех вызовов API в коллекции Wink API убедитесь, что вкладка аутентификации установлена на `Inherit auth from parent`, чтобы токен автоматически добавлялся к каждому запросу.
</Steps>

:::tip[Полезный совет]
Рекомендуется сделать домен сервера, client ID и client secret переменными окружения. Так вы сможете легко переключаться между тестовым и рабочим окружениями и повторно использовать все созданные операции.
:::
