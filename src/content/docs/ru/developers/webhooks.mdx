---
title: Вебхуки
description: Подписка на события Wink и TripPay.
sidebar:
  order: 4
---

import { Steps } from '@astrojs/starlight/components';
import CloudinaryImage from '/src/components/cloudinary-image.astro';

Вебхуки — это способ получать и реагировать на события в реальном времени от Wink и TripPay, связанные с вашей учетной записью.

## Пример

<Steps>
1. Происходит бронирование на Wink.
1. Отправляется событие Wink `booking.created`.
2. Ваша система активно слушает это событие.
3. Ваша система отслеживает собственный набор аналитики и использует это событие для обновления своей базы данных временных рядов.
</Steps>

<figure>
<CloudinaryImage
      width="350"
      height="215"
      resize="scale"
      quality="best"
      alt="Пример вебхука"
      src="academy/webhook"
      errorImage="noimage_opaque_nyrtl0.png"
    />
    <figcaption>*Пример записи вебхука*</figcaption>
</figure>

:::note
Вебхук Wink отличается от вебхука TripPay.

- Если вы хотите слушать события Wink, вы можете создать вебхук через [Extranet](https://extranet.wink.travel) или [Studio](https://studio.wink.travel).
- Если вы хотите слушать события TripPay, вы можете создать вебхук через [Payment](https://pay.wink.travel).
:::

*В этом примере мы будем аутентифицироваться через [Studio](https://studio.wink.travel).*

<Steps>
1. После аутентификации нажмите на иконку профиля в правом верхнем углу, появится меню.
2. Нажмите на ссылку `Webhooks`.
3. Вы будете перенаправлены на страницу ваших вебхуков.
</Steps>

## Создание вебхука

:::caution
Вам нужно создать партнерский аккаунт в Wink или аккаунт в TripPay перед созданием вебхука, так как вы будете привязывать вебхук к конкретной учетной записи.
:::

Вот шаги для создания вебхука:

<Steps>
1. На странице вебхуков нажмите кнопку `Create new webhook`.
2. ***Имя*** Дайте вашему вебхуку имя. *например, Wink Stalker*
3. ***Включить*** Оставьте как есть, чтобы вебхук был включен.
4. **Имя сущности** Свяжите вебхук с одной из ваших существующих учетных записей. *например, Cool Account*
5. **События** Выберите события, которые вас интересуют. *например, `booking.created`*
6. **URL вебхука** Введите URL, на который вы будете получать события от нас. *например, `https://my.system.com/webhook/wink`*
7. Нажмите кнопку `Save` для продолжения.
</Steps>

Вы будете перенаправлены обратно к списку вебхуков, и ваш новый вебхук готов к работе.

## Обновление вебхука

Вам нужно обновить приложение, если вы хотите:

- Отключить вебхук.
- Слушать больше или меньше событий.
- Изменить URL для прослушивания вебхука.

Чтобы обновить существующий вебхук, выполните следующие действия:

<Steps>
1. Нажмите ссылку `Actions` для вебхука, который хотите обновить.
2. Нажмите кнопку `Update` в разделе Actions.
3. Внесите изменения в вебхук.
4. Нажмите кнопку `Save` для продолжения.
</Steps>

Вы будете перенаправлены обратно к списку вебхуков.

## Удаление вебхука

Если вебхук больше не нужен, вы можете удалить его.

Чтобы удалить вебхук, выполните следующие действия:

<Steps>
1. Нажмите ссылку `Actions` для вебхука, который хотите удалить.
2. Нажмите кнопку `Remove` в разделе Actions.
3. Нажмите кнопку `OK` для подтверждения удаления.
</Steps>

Вы будете перенаправлены обратно к списку вебхуков.
